{"ast":null,"code":"var _jsxFileName = \"/home/aspirine/Documents/GitHub/KoohMusic/src/components/Controls.js\";\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport playerContext from '../context/playerContext';\n\nfunction Controls() {\n  // Global State\n  const {\n    currentSong,\n    nextSong,\n    prevSong,\n    repeat,\n    random,\n    playing,\n    toggleRandom,\n    toggleRepeat,\n    togglePlaying,\n    handleEnd,\n    songslist\n  } = useContext(playerContext);\n  const audio = useRef('audio_tag'); // self State\n\n  const [statevolum, setStateVolum] = useState(0.3);\n  const [dur, setDur] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n\n  const fmtMSS = s => {\n    return (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + ~~s;\n  };\n\n  const toggleAudio = () => audio.current.paused ? audio.current.play() : audio.current.pause();\n\n  const handleVolume = q => {\n    setStateVolum(q);\n    audio.current.volume = q;\n  };\n\n  const handleProgress = e => {\n    let compute = e.target.value * dur / 100;\n    setCurrentTime(compute);\n    audio.current.currentTime = compute;\n  };\n\n  useEffect(() => {\n    audio.current.volume = statevolum;\n\n    if (playing) {\n      toggleAudio();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [currentSong]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"audio\", {\n    onTimeUpdate: e => setCurrentTime(e.target.currentTime),\n    onCanPlay: e => setDur(e.target.duration),\n    onEnded: handleEnd,\n    ref: audio,\n    type: \"audio/mpeg\",\n    preload: \"true\",\n    src: songslist[currentSong].fileUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vlme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"volum\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-volume-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    value: Math.round(statevolum * 100),\n    type: \"range\",\n    name: \"volBar\",\n    id: \"volBar\",\n    onChange: e => handleVolume(e.target.value / 100),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"musicControls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"prev\",\n    onClick: prevSong,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-step-backward\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"play\",\n    onClick: () => {\n      togglePlaying();\n      toggleAudio();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: !playing ? '' : 'hide',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-play\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: !playing ? 'hide' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-pause\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"next\",\n    onClick: nextSong,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-step-forward\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progressb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"songMeta\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"songtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, songslist[currentSong].title), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"songartistName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, songslist[currentSong].artistName)), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleProgress,\n    value: dur ? currentTime * 100 / dur : 0,\n    type: \"range\",\n    name: \"progresBar\",\n    id: \"prgbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"currentT\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, fmtMSS(currentTime)), \"/\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"totalT\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, fmtMSS(dur))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"plsoptions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: toggleRandom,\n    className: 'random ' + (random ? 'active' : ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-random\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: toggleRepeat,\n    className: 'repeat ' + (repeat ? 'active' : ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-redo-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default Controls;","map":{"version":3,"sources":["/home/aspirine/Documents/GitHub/KoohMusic/src/components/Controls.js"],"names":["React","useState","useEffect","useRef","useContext","playerContext","Controls","currentSong","nextSong","prevSong","repeat","random","playing","toggleRandom","toggleRepeat","togglePlaying","handleEnd","songslist","audio","statevolum","setStateVolum","dur","setDur","currentTime","setCurrentTime","fmtMSS","s","toggleAudio","current","paused","play","pause","handleVolume","q","volume","handleProgress","e","compute","target","value","duration","fileUrl","Math","round","title","artistName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react'\nimport playerContext from '../context/playerContext'\n\nfunction Controls() {\n  // Global State\n  const {\n    currentSong,\n    nextSong,\n    prevSong,\n    repeat,\n    random,\n    playing,\n    toggleRandom,\n    toggleRepeat,\n    togglePlaying,\n    handleEnd,\n    songslist,\n  } = useContext(playerContext)\n\n  const audio = useRef('audio_tag')\n\n  // self State\n  const [statevolum, setStateVolum] = useState(0.3)\n  const [dur, setDur] = useState(0)\n  const [currentTime, setCurrentTime] = useState(0)\n\n  const fmtMSS = (s) => {\n    return (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + ~~s\n  }\n\n  const toggleAudio = () =>\n    audio.current.paused ? audio.current.play() : audio.current.pause()\n\n  const handleVolume = (q) => {\n    setStateVolum(q)\n    audio.current.volume = q\n  }\n\n  const handleProgress = (e) => {\n    let compute = (e.target.value * dur) / 100\n    setCurrentTime(compute)\n    audio.current.currentTime = compute\n  }\n\n  useEffect(() => {\n    audio.current.volume = statevolum\n    if (playing) {\n      toggleAudio()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentSong])\n\n  return (\n    <div className=\"controls\">\n      <audio\n        onTimeUpdate={(e) => setCurrentTime(e.target.currentTime)}\n        onCanPlay={(e) => setDur(e.target.duration)}\n        onEnded={handleEnd}\n        ref={audio}\n        type=\"audio/mpeg\"\n        preload=\"true\"\n        src={songslist[currentSong].fileUrl}\n      />\n      <div className=\"vlme\">\n        <span className=\"volum\">\n          <i className=\"fas fa-volume-down\"></i>\n        </span>\n        <input\n          value={Math.round(statevolum * 100)}\n          type=\"range\"\n          name=\"volBar\"\n          id=\"volBar\"\n          onChange={(e) => handleVolume(e.target.value / 100)}\n        />\n      </div>\n      <div className=\"musicControls\">\n        <span className=\"prev\" onClick={prevSong}>\n          <i className=\"fas fa-step-backward\"></i>\n        </span>\n\n        <span\n          className=\"play\"\n          onClick={() => {\n            togglePlaying()\n            toggleAudio()\n          }}\n        >\n          <span className={!playing ? '' : 'hide'}>\n            <i className=\"fas fa-play\"></i>\n          </span>\n          <span className={!playing ? 'hide' : ''}>\n            <i className=\"fas fa-pause\"></i>\n          </span>\n        </span>\n\n        <span className=\"next\" onClick={nextSong}>\n          <i className=\"fas fa-step-forward\"></i>\n        </span>\n      </div>\n\n      <div className=\"progressb\">\n        <div className=\"songMeta\">\n          <span className=\"songtitle\">{songslist[currentSong].title}</span>\n          <span className=\"songartistName\">\n            {songslist[currentSong].artistName}\n          </span>\n        </div>\n        <input\n          onChange={handleProgress}\n          value={dur ? (currentTime * 100) / dur : 0}\n          type=\"range\"\n          name=\"progresBar\"\n          id=\"prgbar\"\n        />\n        <span className=\"currentT\">{fmtMSS(currentTime)}</span>/\n        <span className=\"totalT\">{fmtMSS(dur)}</span>\n      </div>\n      <div className=\"plsoptions\">\n        <span\n          onClick={toggleRandom}\n          className={'random ' + (random ? 'active' : '')}\n        >\n          <i className=\"fas fa-random\"></i>\n        </span>\n        <span\n          onClick={toggleRepeat}\n          className={'repeat ' + (repeat ? 'active' : '')}\n        >\n          <i className=\"fas fa-redo-alt\"></i>\n        </span>\n      </div>\n    </div>\n  )\n}\n\nexport default Controls\n"]},"metadata":{},"sourceType":"module"}